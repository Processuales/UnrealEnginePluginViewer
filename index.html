<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UE Plugin Source Explorer</title>
    <!-- Highlight.js Theme -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <!-- Link to external CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="controls">
        <div>
            <label for="folderInput">Select Plugin Folder:</label>
            <input type="file" id="folderInput" webkitdirectory directory multiple>
            <span id="loadingIndicator">Loading...</span>
        </div>
        <div class="toggle-group">
            <input type="checkbox" id="selectCorrespondingToggle">
            <label for="selectCorrespondingToggle">Select corresponding .h/.cpp</label>
        </div>
         <div class="toggle-group">
            <input type="checkbox" id="hBeforeCppToggle" checked>
            <label for="hBeforeCppToggle">Sort .h before corresponding .cpp</label>
        </div>
    </div>

    <div id="errorMessage"></div>

    <div id="mainContent">
        <div id="fileTreeContainer">
            <h2>File Tree</h2>
            <ul id="fileTree">
                <li>Select a folder above...</li>
            </ul>
        </div>
        <!-- Resizable Divider -->
        <div id="resizer"></div>
        <div id="combinedViewerContainer">
             <div id="combinedHeader">
                <span>Selected Files (<span id="combinedTokenCount">0</span> estimated tokens)</span>
                <!-- Add Copy All Button -->
                <div>
                    <button id="copyAllButton" title="Copy all content in the viewer">Copy All</button>
                    <button id="clearButton" title="Clear content and deselect files">Clear Content</button>
                </div>
             </div>
             <div id="combinedContentWrapper">
                <div id="lineNumbers">1</div>
                <pre id="combinedContentPre" tabindex="0"><code id="combinedContentCode"></code></pre>
            </div>
        </div>
    </div>

    <!-- Context Menu Structure -->
    <div id="contextMenu">
        <ul>
            <li id="ctx-copy">Copy</li>
            <li id="ctx-copy-corr">Copy with Corresponding</li>
            <li id="ctx-goto">Go to in Viewer</li>
        </ul>
    </div>

    <!-- Highlight.js Core & Languages -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/cpp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/glsl.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/csharp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/json.min.js"></script>


    <!-- Main application script (module) -->
    <script type="module" src="main.js"></script>

</body>
</html>